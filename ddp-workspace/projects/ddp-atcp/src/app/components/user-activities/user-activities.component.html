<table
  *ngIf="activities"
  mat-table
  class="user-activities-table"
  [dataSource]="activities"
>
  <ng-container matColumnDef="activityName">
    <th
      mat-header-cell
      *matHeaderCellDef
      class="user-activities-table__cell user-activities-table__cell--header"
    >
      {{ 'Components.UserActivities.Columns.Name' | translate }}
    </th>
    <td mat-cell *matCellDef="let activity" class="user-activities-table__cell">
      {{ activity.activityName }}
    </td>
  </ng-container>

  <ng-container matColumnDef="activitySummary">
    <th
      mat-header-cell
      *matHeaderCellDef
      class="user-activities-table__cell user-activities-table__cell--header"
    >
      {{ 'Components.UserActivities.Columns.Summary' | translate }}
    </th>
    <td mat-cell *matCellDef="let activity" class="user-activities-table__cell">
      {{ activity.activitySummary }}
    </td>
  </ng-container>

  <ng-container matColumnDef="createdAt">
    <th
      mat-header-cell
      *matHeaderCellDef
      class="user-activities-table__cell user-activities-table__cell--header"
    >
      {{ 'Components.UserActivities.Columns.CreatedAt' | translate }}
    </th>
    <td mat-cell *matCellDef="let activity" class="user-activities-table__cell">
      {{ activity.createdAt | date: 'MM / dd' }}
    </td>
  </ng-container>

  <ng-container matColumnDef="questionCount">
    <th
      mat-header-cell
      *matHeaderCellDef
      class="user-activities-table__cell user-activities-table__cell--header"
    >
      {{ 'Components.UserActivities.Columns.Status' | translate }}
    </th>
    <td mat-cell *matCellDef="let activity" class="user-activities-table__cell">
      <ng-container *ngIf="showQuestionCount(activity); else activityStatus">
        {{
          'Components.UserActivities.QuestionCount'
            | translate
              : {
                  answered: activity.numQuestionsAnswered,
                  total: activity.numQuestions
                }
        }}
      </ng-container>

      <ng-template #activityStatus>
        {{
          'Components.UserActivities.ActivityStatus.' + activity.statusCode
            | translate
        }}
      </ng-template>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th
      mat-header-cell
      *matHeaderCellDef
      class="user-activities-table__cell user-activities-table__cell--header"
    >
      {{ 'Components.UserActivities.Columns.Actions' | translate }}
    </th>
    <td
      mat-cell
      *matCellDef="let activity; let i = index"
      class="user-activities-table__cell"
    >
      <button
        *ngIf="
          activity === currentActivity &&
          activity.statusCode === statusCodes.CREATED
        "
        class="BtnFilled BtnFilled--blue"
        (click)="startActivity.emit(activity.instanceGuid)"
      >
        {{ 'Components.UserActivities.ActivityActions.Start' | translate }}
      </button>

      <button
        *ngIf="
          activity === currentActivity &&
          activity.statusCode === statusCodes.IN_PROGRESS
        "
        class="BtnFilled BtnFilled--blue"
        (click)="continueActivity.emit(activity.instanceGuid)"
      >
        {{ 'Components.UserActivities.ActivityActions.Continue' | translate }}
      </button>

      <button
        *ngIf="activity.statusCode === statusCodes.COMPLETE"
        class="BtnFilled BtnFilled--blue"
        (click)="viewActivity.emit(activity.instanceGuid)"
      >
        {{ 'Components.UserActivities.ActivityActions.ViewEdit' | translate }}
      </button>
    </td>
  </ng-container>

  <tr
    mat-header-row
    *matHeaderRowDef="displayedColumns"
    class="user-activities-table__row--header"
  ></tr>
  <tr
    mat-row
    *matRowDef="let activity; columns: displayedColumns"
    class="user-activities-table__row"
    [class.user-activities-table__row--disabled]="isRowDisabled(activity)"
  ></tr>
</table>
