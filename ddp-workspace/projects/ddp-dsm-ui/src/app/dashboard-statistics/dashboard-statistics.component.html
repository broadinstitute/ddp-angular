<h1>
  Statistics Dashboard
</h1>

<div class="dashboard">

  <app-date-range [disabled]="loading" [initDates]="dateRange" (dateChanged)="dateChanged($event)" ></app-date-range>

  <div class="dashboard-chartsAndCounts">

    <mat-tab-group mat-stretch-tabs  (selectedTabChange)="getStatisticsFor($event)" mat-align-tabs="center" >

      <mat-tab [disabled]="loading" aria-label="Charts">
        <ng-template mat-tab-label >
          <mat-icon class="example-tab-icon">bar_chart</mat-icon>
          Charts
        </ng-template>
        <app-plotly-charts *ngIf="!loading; else loadingSpinner" [chartData]="charts"></app-plotly-charts>
      </mat-tab>

      <mat-tab [disabled]="loading" aria-label="Counts">
        <ng-template mat-tab-label>
          <mat-icon class="example-tab-icon">score</mat-icon>
          Counts
        </ng-template>
        <app-counts-table *ngIf="!loading; else loadingSpinner"  [counts]="counts"></app-counts-table>
      </mat-tab>
    </mat-tab-group>

    <ng-template  #loadingSpinner>
      <div class="spinner">
        <mat-spinner></mat-spinner>
      </div>
    </ng-template>

  </div>

</div>
