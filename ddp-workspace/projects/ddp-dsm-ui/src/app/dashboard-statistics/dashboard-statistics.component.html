<h1>
  Statistics Dashboard
</h1>

<ng-container class="dashboard" >
  <ng-container *ngTemplateOutlet="charts"></ng-container>
</ng-container>

<ng-template class="spinner" #loadingSpinner>
  <mat-spinner></mat-spinner>
</ng-template>

<ng-template #charts>

  <app-date-range [disabled]="loading" [initDates]="dateRange" (dateChanged)="dateChanged($event)" ></app-date-range>

  <div class="dashboard-chartsAndCounts" >

    <mat-tab-group mat-align-tabs="center" >

      <mat-tab>
        <ng-template mat-tab-label>
          <mat-icon class="example-tab-icon">bar_chart</mat-icon>
          Charts
        </ng-template>
        <app-plotly-charts *ngIf="!loading; else loadingSpinner" [chartData]="charts$ | async"></app-plotly-charts>
      </mat-tab>

      <mat-tab>
        <ng-template mat-tab-label>
          <mat-icon class="example-tab-icon">score</mat-icon>
          Counts
        </ng-template>
        <app-counts-table *ngIf="!loading; else loadingSpinner" [counts]="counts$ | async"></app-counts-table>
      </mat-tab>
    </mat-tab-group>

    <ng-template #noCharts>
      <p class="noCharts">There are not available charts and counts for this study</p>
    </ng-template>

  </div>

</ng-template>
