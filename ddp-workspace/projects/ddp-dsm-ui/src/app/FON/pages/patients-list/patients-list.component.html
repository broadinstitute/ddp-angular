<div class="patients">
  <header class="patients-header">
    <p>Patients</p>
  </header>

  <section class="patients-buttons">
    <button class="btn_secondary">
      <mat-icon>search</mat-icon>
      <mat-icon>keyboard_arrow_down</mat-icon>
    </button>
    <button class="btn_secondary" [openInModal]="registerPatientsModalComponent">
      <mat-icon>people</mat-icon>
      Register patients
    </button>
    <button class="btn_secondary">
      <mat-icon>cloud_upload</mat-icon>
      Upload patient data
    </button>
  </section>

  <main class="patients-list">
    <ng-container *ngTemplateOutlet="mainContent; context: {
    patients: patients$ | async,
    loading: loading$ | async,
    totalCount: totalCount$ | async
    }">
    </ng-container>

  </main>
</div>


<!--  template refs-->

<ng-template #mainContent
             let-patients="patients"
             let-loading="loading"
             let-totalCount="totalCount">

  <ng-container *ngIf="patients.length || (!patients.length && loading) else noPatients">

    <section class="patients-list-info">
      <p>All patients ({{totalCount}})</p>
    </section>

    <main class="patients-list-table">
      <app-table [data]="patients" [loading]="loading" (rowClick)="openPatientInfo($event)"></app-table>
    </main>

    <footer class="patients-list-paginator">
      <app-paginator
        (pageChanged)="getPageList($event)"
        [currentPageIndex]="pageIndex"
        [rowsPerPage]="pageSize"
        [totalCount]="totalCount"
      ></app-paginator>
    </footer>

  </ng-container>

  <ng-template #noPatients>
    <div class="noPatients">
      <img class="noPatients-image" height="101" width="125" src="/assets/images/users.png" alt="users icon">
      <p class="noPatients-firstTitle">Start building your patient list.</p>
      <p class="noPatients-secondTitle">Start tracking your Fontan Patientâ€™s data to help drive improvements in
        care.</p>
      <button class="btn_primary">Get Started</button>
    </div>
  </ng-template>

</ng-template>
