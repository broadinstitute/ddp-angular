<div class="container">
    <ng-container *ngIf="!thankYou && !sorry && !error && !isLoading">
        <form class="mailing-list" [formGroup]="mailingListForm" (ngSubmit)="onSubmit()">
            <p class="mailing-list__question">{{'MailingList.Questions.Adult' | translate}}</p>
            <mat-radio-group class="mailing-list__group" formControlName="adult">
                <mat-radio-button class="mailing-list__item" value="true">
                    {{'MailingList.Answers.Yes' | translate}}
                </mat-radio-button>
                <mat-radio-button value="false">
                    {{'MailingList.Answers.No' | translate}}
                </mat-radio-button>
                <mat-error class="mailing-list__error" *ngIf="fieldHasError('adult', 'required')">
                    {{'MailingList.Validations.RequiredOption' | translate}}
                </mat-error>
            </mat-radio-group>

            <p class="mailing-list__question">{{'MailingList.Questions.Patient' | translate}}</p>
            <mat-radio-group class="mailing-list__group" formControlName="bwhPatient">
                <mat-radio-button class="mailing-list__item" value="true">
                    {{'MailingList.Answers.Yes' | translate}}
                </mat-radio-button>
                <mat-radio-button class="mailing-list__item" value="false">
                    {{'MailingList.Answers.No' | translate}}
                </mat-radio-button>
                <mat-radio-button value="null">
                    {{'MailingList.Answers.NoAnswer' | translate}}
                </mat-radio-button>
                <mat-error class="mailing-list__error" *ngIf="fieldHasError('bwhPatient', 'required')">
                    {{'MailingList.Validations.RequiredOption' | translate}}
                </mat-error>
            </mat-radio-group>

            <p class="mailing-list__question mailing-list__question_last">
                {{'MailingList.Questions.Email' | translate}}
            </p>
            <mat-form-field class="mailing-list__input">
                <mat-label>{{'MailingList.EmailLabel' | translate}}</mat-label>
                <input matInput [placeholder]="'MailingList.EmailPlaceholder' | translate" formControlName="email"
                    type="email">
                <mat-error *ngIf="fieldHasError('email', 'pattern') && !fieldHasError('email', 'required')">
                    {{'MailingList.Validations.InvalidEmail' | translate}}
                </mat-error>
                <mat-error *ngIf="fieldHasError('email', 'required')">
                    {{'MailingList.Validations.RequiredEmail' | translate}}
                </mat-error>
            </mat-form-field>

            <button class="mailing-list__button" type="submit"
                [attr.aria-label]="'Common.Buttons.Submit.AriaLabel' | translate">
                {{'Common.Buttons.Submit.Title' | translate}}
            </button>
        </form>
    </ng-container>

    <ng-container *ngIf="isLoading">
        <mat-spinner></mat-spinner>
    </ng-container>

    <ng-container *ngIf="thankYou">
        <div class="mailing-list mailing-list_result">
            <button class="mailing-list__close" mat-icon-button (click)="onClose('thankYou')">
                <mat-icon>clear</mat-icon>
            </button>
            <img src="assets/images/email-sent.svg" [alt]="'MailingList.ThankYou.ImageAlt' | translate">
            <h3 class="center no-margin mailing-list__title" translate>MailingList.ThankYou.Title</h3>
            <p class="center" translate>MailingList.ThankYou.Text</p>
        </div>
    </ng-container>

    <ng-container *ngIf="sorry">
        <div class="mailing-list mailing-list_result">
            <button class="mailing-list__close" mat-icon-button (click)="onClose('sorry')">
                <mat-icon>clear</mat-icon>
            </button>
            <h3 class="center no-margin mailing-list__title" translate>MailingList.Sorry.Title</h3>
            <p class="center">
                <span translate>MailingList.Sorry.Text.Part1</span>
                <a class="Link Link_bold" routerLink="/" fragment="faq" translate>MailingList.Sorry.Text.Part2</a>
                <span translate>MailingList.Sorry.Text.Part3</span>
            </p>
        </div>
    </ng-container>

    <ng-container *ngIf="error">
        <div class="mailing-list mailing-list_result">
            <button class="mailing-list__close" mat-icon-button (click)="onClose('error')">
                <mat-icon>clear</mat-icon>
            </button>
            <h3 class="center no-margin mailing-list__title" translate>Toolkit.ErrorPage.Text</h3>
            <p class="center">
                <span translate>Toolkit.ErrorPage.DefaultText.TextPt1</span>
                <a [href]="emailHref" class="Link">{{email}}</a>
                <span translate>Toolkit.ErrorPage.DefaultText.TextPt2</span>
                <a [href]="phoneHref" class="Link">{{phone}}</a>.
            </p>
        </div>
    </ng-container>
</div>